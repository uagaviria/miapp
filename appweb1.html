<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>CONSOLA REACTOR - COMPLETA</title>
  <style>
    :root {
      --primary-color: #39ff14; 
      --secondary-color: #ffb300; 
      --danger-color: #ff003c; 
      --bg-color: #050505;
      --panel-metal: #1a1a1a; 
      --crt-bg: #0d1a0d; 
    }

    * { box-sizing: border-box; } /* Crucial para tablets */

    body {
      background-color: var(--bg-color);
      color: var(--primary-color);
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      padding: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      user-select: none;
    }

    #boot-screen {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #000; z-index: 10000;
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        cursor: pointer;
    }

    .boot-text { 
        font-size: 1.5rem; color: var(--primary-color); 
        border: 2px solid var(--primary-color); padding: 20px;
        animation: blink 1s infinite;
    }

    /* CAPA DE INTERFAZ DE CÁMARA (VFX) */
    #camera-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        z-index: 5000; pointer-events: none;
        background: radial-gradient(circle, rgba(0,0,0,0) 55%, rgba(0,0,0,0.8) 90%, black 100%);
    }
    
    .cam-ui-rec { position: absolute; top: 20px; right: 30px; color: #ff0000; font-weight: bold; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; text-shadow: 0 0 5px red; }
    .cam-dot { width: 15px; height: 15px; background: red; border-radius: 50%; animation: blink 1s infinite; }
    .cam-ui-time { position: absolute; bottom: 20px; right: 30px; color: #fff; font-size: 1.2rem; opacity: 0.8; font-family: monospace; }
    .cam-ui-battery { position: absolute; top: 20px; left: 30px; color: #fff; font-size: 1rem; border: 1px solid #fff; padding: 2px 8px; border-radius: 3px; }

    /* ESTRUCTURA PRINCIPAL AJUSTADA */
    #main-console-chassis {
        background: var(--panel-metal);
        border: 4px solid #444;
        display: grid;
        grid-template-columns: 280px 1fr 200px;
        grid-template-rows: auto 1fr auto;
        gap: 15px;
        width: 100vw; height: 100vh;
        padding: 15px;
        position: relative;
    }

    .side-panel { 
        background: #181818; 
        border: 2px inset #000; 
        padding: 10px; 
        display: flex; 
        flex-direction: column; 
        gap: 8px; 
        box-shadow: inset 0 0 20px #000;
        overflow: hidden;
    }

    .panel-title { font-size: 0.65rem; color: #888; border-bottom: 1px solid #444; padding-bottom: 3px; text-transform: uppercase;}

    /* MONITORES Y METROS */
    .cctv-monitor {
        height: 180px; background: #000; border: 2px solid #333; position: relative; overflow: hidden;
    }
    .cctv-video { width: 100%; height: 100%; object-fit: cover; filter: sepia(100%) hue-rotate(90deg) brightness(0.8); opacity: 0.7; }

    .analog-meter {
        background: #e0e0e0; border: 3px solid #111; border-radius: 3px; height: 70px; position: relative; overflow: hidden;
    }
    .meter-label { position: absolute; bottom: 2px; width: 100%; text-align: center; color: #000; font-weight: bold; font-size: 0.7rem; font-family: Arial; }
    .meter-needle {
        position: absolute; bottom: -5px; left: 50%; width: 2px; height: 80%; background: #cc0000; transform-origin: bottom center; transform: rotate(-45deg); transition: transform 0.5s;
    }

    /* CONTENEDOR CENTRAL CRT */
    .crt-monitor-bezel { 
        grid-column: 2; grid-row: 2; 
        background: #222; border-radius: 15px; padding: 15px; 
        box-shadow: inset 0 0 30px #000; border: 3px solid #111; 
        position: relative;
    }
    
    .container { 
        background: var(--crt-bg); 
        padding: 15px; 
        border: 2px solid var(--primary-color); 
        height: 100%; 
        display: flex; 
        flex-direction: column; 
        justify-content: space-between; 
        border-radius: 10px;
        position: relative;
    }

    .crt-top-vitals { display: flex; justify-content: space-around; border-bottom: 1px dotted var(--primary-color); padding-bottom: 5px; }
    .vital-value { font-size: 1.2rem; font-weight: bold; }

    /* TECLADO VIRTUAL */
    #virtual-keyboard { display: flex; flex-direction: column; gap: 4px; margin-top: 5px; }
    .kb-row { display: flex; gap: 4px; justify-content: center; }
    .key-btn { flex: 1; background: rgba(0, 40, 0, 0.6); border: 1px solid var(--primary-color); color: var(--primary-color); font-size: 1rem; padding: 12px 0; cursor: pointer; }
    .key-btn:active { background: var(--primary-color); color: #000; }

    .round-meter { width: 100%; aspect-ratio: 1/1; position: relative; background: #e0e0e0; border-radius: 50%; border: 4px solid #222; }
    .round-needle { position: absolute; top: 15%; left: 49%; width: 2px; height: 35%; background: #000; transform-origin: bottom center; transform: rotate(-100deg); }

    .console-footer { grid-column: 1 / span 3; color: #555; font-size: 0.7rem; text-align: center; padding-top: 5px; }

    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
  </style>
</head>
<body id="main-body">

    <div id="boot-screen" onclick="iniciarSistema()">
        <div class="boot-text">HAGA CLIC PARA INICIAR SISTEMA</div>
    </div>

    <div id="camera-overlay">
        <div class="cam-ui-rec"><div class="cam-dot"></div> GRAB</div>
        <div class="cam-ui-battery">BAT. FULL</div>
        <div class="cam-ui-time" id="cam-time">00:00:00:00</div>
    </div>

    <div id="main-console-chassis">
        <div style="grid-column: 1 / span 3; display: flex; align-items: center; background: #222; padding: 5px 15px; border-radius: 5px;">
            <span style="color: yellow; font-size: 1.5rem; margin-right: 10px;">☢️</span> 
            <span style="font-weight: bold;">UNIDAD-734 / SISTEMA DE CONTROL DE CONTENCIÓN</span>
        </div>

        <div class="side-panel">
            <div class="panel-title">VIDEO NÚCLEO</div>
            <div class="cctv-monitor">
                <video id="reactor-video" loop muted playsinline class="cctv-video">
                    <source src="Cherenkov Radiation.mp4" type="video/mp4">
                </video>
            </div>
            
            <div class="panel-title">MÉTRICAS ANALÓGICAS</div>
            <div class="analog-meter">
                <div class="meter-needle" style="animation: voltMove 3s infinite alternate;"></div>
                <div class="meter-label">VOLTAJE AC</div>
            </div>
            <div class="analog-meter">
                <div class="meter-needle" style="animation: ampMove 0.8s infinite alternate;"></div>
                <div class="meter-label">AMPERAJE</div>
            </div>
        </div>

        <div class="crt-monitor-bezel">
            <div class="container">
                <div class="crt-top-vitals">
                    <div class="vital-block"><span>TEMP</span><div class="vital-value" style="color:var(--secondary-color)">450°C</div></div>
                    <div class="vital-block"><span>RADS</span><div class="vital-value" id="rad-value" style="color:var(--danger-color)">3.6 R/h</div></div>
                </div>

                <h1 style="font-size: 1.2rem; text-align: center; margin: 5px 0;">VERIFICACIÓN DE SEGURIDAD</h1>
                <div id="question-text" style="text-align: center; font-size: 1rem; color: #fff; min-height: 40px;">Cargando protocolo...</div>
                
                <input type="text" id="answer-input" style="width:100%; background:black; color:var(--primary-color); border:1px solid var(--primary-color); font-size: 1.5rem; text-align: center; padding: 5px;" readonly>

                <div id="virtual-keyboard">
                    <div class="kb-row">
                        <button class="key-btn" onclick="pressKey('1')">1</button>
                        <button class="key-btn" onclick="pressKey('2')">2</button>
                        <button class="key-btn" onclick="pressKey('3')">3</button>
                        <button class="key-btn" onclick="pressKey('A')">A</button>
                        <button class="key-btn" onclick="pressKey('B')">B</button>
                    </div>
                    <div class="kb-row">
                        <button class="key-btn" style="color:red" onclick="pressKey('DEL')">BORRAR</button>
                        <button class="key-btn" style="flex: 2; font-weight: bold;" onclick="pressKey('ENTER')">TRANSMITIR</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="side-panel">
            <div class="panel-title">PRESIÓN VAPOR</div>
            <div class="round-meter">
                <div class="round-needle" style="animation: steamMove 5s infinite ease-in-out;"></div>
            </div>
            <div class="panel-title">INDICADORES LED</div>
            <div style="display: grid; grid-template-columns: 1fr; gap: 5px; font-size: 0.7rem;">
                <div><span style="color:lime">●</span> NÚCLEO ONLINE</div>
                <div><span style="color:orange">●</span> ENFRIAMIENTO ACTIVO</div>
                <div><span id="alert-led" style="color:#400">●</span> ALERTA CRÍTICA</div>
            </div>
        </div>

        <div class="console-footer">> TERMINAL ACTIVA EN PUERTO COM1... ESPERANDO RESPUESTA_</div>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const video = document.getElementById('reactor-video');
        const uiInput = document.getElementById('answer-input');
        const uiQuestion = document.getElementById('question-text');

        const preguntas = [
            { t: "Voltaje en caja amarilla", r: "220" },
            { t: "Válvulas rojas visibles", r: "4" },
            { t: "Código bajo extintor", r: "B7" }
        ];
        let pIndex = 0;

        function updateCameraTime() {
            const now = new Date();
            document.getElementById('cam-time').innerText = now.toLocaleTimeString('es-ES', { hour12: false });
            requestAnimationFrame(updateCameraTime);
        }
        updateCameraTime();

        function iniciarSistema() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            document.getElementById('boot-screen').style.display = 'none';
            video.play();
            cargarPregunta();
        }

        function cargarPregunta() {
            uiQuestion.innerText = preguntas[pIndex].t;
            uiInput.value = "";
        }

        function pressKey(key) {
            playBeep();
            if (key === 'DEL') uiInput.value = uiInput.value.slice(0, -1);
            else if (key === 'ENTER') validar();
            else uiInput.value += key;
        }

        function playBeep() {
            const osc = audioCtx.createOscillator();
            const g = audioCtx.createGain();
            osc.connect(g); g.connect(audioCtx.destination);
            osc.frequency.value = 600; g.gain.value = 0.1;
            osc.start(); osc.stop(audioCtx.currentTime + 0.05);
        }

        function validar() {
            if (uiInput.value === preguntas[pIndex].r) {
                pIndex = (pIndex + 1) % preguntas.length;
                cargarPregunta();
            } else {
                uiInput.classList.add('input-error');
                setTimeout(() => uiInput.classList.remove('input-error'), 500);
            }
        }
    </script>

    <style>
        /* Animaciones extra para los metros */
        @keyframes voltMove { from { transform: rotate(-30deg); } to { transform: rotate(10deg); } }
        @keyframes ampMove { from { transform: rotate(-5deg); } to { transform: rotate(5deg); } }
        @keyframes steamMove { 0% { transform: rotate(-100deg); } 50% { transform: rotate(20deg); } 100% { transform: rotate(-100deg); } }
        .input-error { border-color: red !important; box-shadow: 0 0 10px red; }
    </style>
</body>
</html>
